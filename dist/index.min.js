!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(3)},function(e,t,n){(function(t,n){!function(t){"use strict";function r(e,t,n,r){var i=Object.create((t||o).prototype),a=new d(r||[]);return i._invoke=p(e,n,a),i}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function o(){}function a(){}function s(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){this.arg=e}function c(e){function t(t,n){var r=e[t](n),i=r.value;return i instanceof l?Promise.resolve(i.arg).then(o,a):Promise.resolve(i).then(function(e){return r.value=e,r})}function r(e,n){function r(){return t(e,n)}return i=i?i.then(r,r):new Promise(function(e){e(r())})}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var i,o=t.bind(e,"next"),a=t.bind(e,"throw");t.bind(e,"return");this._invoke=r}function p(e,t,n){var r=k;return function(o,a){if(r===I)throw new Error("Generator is already running");if(r===O){if("throw"===o)throw a;return m()}for(;;){var s=n.delegate;if(s){if("return"===o||"throw"===o&&s.iterator[o]===y){n.delegate=null;var u=s.iterator["return"];if(u){var l=i(u,s.iterator,a);if("throw"===l.type){o="throw",a=l.arg;continue}}if("return"===o)continue}var l=i(s.iterator[o],s.iterator,a);if("throw"===l.type){n.delegate=null,o="throw",a=l.arg;continue}o="next",a=y;var c=l.arg;if(!c.done)return r=E,c;n[s.resultName]=c.value,n.next=s.nextLoc,n.delegate=null}if("next"===o)n._sent=a,r===E?n.sent=a:n.sent=y;else if("throw"===o){if(r===k)throw r=O,a;n.dispatchException(a)&&(o="next",a=y)}else"return"===o&&n.abrupt("return",a);r=I;var l=i(e,t,n);if("normal"===l.type){r=n.done?O:E;var c={value:l.arg,done:n.done};if(l.arg!==P)return c;n.delegate&&"next"===o&&(a=y)}else"throw"===l.type&&(r=O,o="throw",a=l.arg)}}}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function v(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(g.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=y,i.done=!0,i};return r.next=r}}return{next:m}}function m(){return{value:y,done:!0}}var y,g=Object.prototype.hasOwnProperty,w="function"==typeof Symbol&&Symbol.iterator||"@@iterator",b="object"==typeof e,x=t.regeneratorRuntime;if(x)return void(b&&(e.exports=x));x=t.regeneratorRuntime=b?e.exports:{},x.wrap=r;var k="suspendedStart",E="suspendedYield",I="executing",O="completed",P={},_=s.prototype=o.prototype;a.prototype=_.constructor=s,s.constructor=a,a.displayName="GeneratorFunction",x.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},x.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s,e.prototype=Object.create(_),e},x.awrap=function(e){return new l(e)},u(c.prototype),x.async=function(e,t,n,i){var o=new c(r(e,t,n,i));return x.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},u(_),_[w]=function(){return this},_.toString=function(){return"[object Generator]"},x.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},x.values=v,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=y,this.done=!1,this.delegate=null,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),s=g.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),P},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),h(n),P}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},P}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}(),n(2))},function(e,t){function n(){p&&l&&(p=!1,l.length?c=l.concat(c):f=-1,c.length&&r())}function r(){if(!p){var e=a(n);p=!0;for(var t=c.length;t;){for(l=c,c=[];++f<t;)l&&l[f].run();f=-1,t=c.length}l=null,p=!1,s(e)}}function i(e,t){this.fun=e,this.array=t}function o(){}var a,s,u=e.exports={};!function(){try{a=setTimeout}catch(e){a=function(){throw new Error("setTimeout is not defined")}}try{s=clearTimeout}catch(e){s=function(){throw new Error("clearTimeout is not defined")}}}();var l,c=[],p=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new i(e,t)),1!==c.length||p||a(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=r(i),a=n(8),s=r(a),u=n(18),l=r(u),c=n(7),p=r(c),f=n(19),h=r(f);o["default"].sources={AjaxSource:l["default"],SelectSource:p["default"],ArraySource:h["default"]},o["default"].abstracts={Source:s["default"]},"undefined"!=typeof window&&(window.AutoComplete=o["default"]),t["default"]=o["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),c=r(l),p=n(6),f=r(p),h=n(11),d=r(h),v=n(12),m=r(v),y=n(7),g=r(y),w=n(16),b=r(w),x=n(9),k=n(10),E=n(17),I=[E.ENTER,E.ARROW_DOWN,E.ARROW_UP,E.ARROW_LEFT,E.ARROW_RIGHT,E.SHIFT,E.TAB],O=function(){function e(t){var n=t.hiddenInput,r=t.textInput,i=t.source,o=t.selectInput,s=t.style,u=void 0===s?{}:s,l=t.customText,p=void 0!==l&&l,h=(t.searchOnFocus,t.debounceTime),v=void 0===h?600:h,y=t.queryParam,w=void 0===y?"q":y,k=t.minLength,E=void 0===k?1:k,I=t.clearOnType,O=void 0!==I&&I,P=t.autoFind,_=void 0!==P&&P,T=t.autoSelectWhenOneResult,R=void 0===T||T,S=t.emptyItem,C=t.messages,j=void 0===C?{}:C,N=t.references,L=void 0===N?{}:N,A=t.otherParams,q=void 0===A?{}:A;if(a(this,e),this.key=e.currentSerialKey++,this.finding=!1,this.open=!1,this.typing=!1,this.ignoreFocus=!1,this.ignoreBlur=!1,this.valueOnOpen=void 0,this.references=L,this.otherParams=q,this.queryParam=w,this.clearOnType=O,this.autoFind=_,this.minLength=E,this.customText=p,this.autoSelectWhenOneResult=R,this.emptyItem="undefined"!=typeof S?S:!n.hasAttribute("required")&&!r.hasAttribute("required"),!i&&!o)throw new Error("Set a source or a selectInput.");this.source=i||new g["default"](o),this.style=(0,c["default"])({hiddenInput:"ac-hidden-input",textInput:"ac-text-input",panel:"ac-panel",listWrapper:"ac-list-wrapper",item:"ac-item",emptyItem:"ac-empty-item",customTextItem:"ac-custom-text-item",additional:"ac-additional",searchInput:"ac-search-input",searchInputWrapper:"ac-search-input-wrapper",presentText:"ac-present-text",presentInnerText:"ac-present-inner-text",presentCropText:"ac-present-crop-text",errorView:"ac-error-view",errorViewWrapper:"ac-error-view-wrapper",wrapper:"ac-wrapper",openWrapper:"ac-wrapper ac-open-wrapper",rightIcon:"fa fa-search ac-icon",loadingRightIcon:"fa fa-spinner ac-icon ac-loading-icon"},u),this.messages=(0,c["default"])({searchPlaceholder:"Search...",emptyItemName:"Empty"},j),this.elements={hiddenInput:n,textInput:r,wrapper:(0,x.div)({className:this.style.wrapper})},this.debouncedFind=(0,b["default"])(this.find.bind(this),v),this.components={presentText:new f["default"]({style:this.style}),icon:new d["default"]({style:this.style}),panel:new m["default"]({style:this.style},{onSelect:this.select.bind(this)},this)},this.prepareElements(),this.prepareEvents()}return u(e,[{key:"prepareElements",value:function(){this.elements.wrapper.setAttribute("tabindex","0"),this.value=this.elements.hiddenInput.value,this.content=this.elements.textInput.value,this.elements.textInput.parentNode.insertBefore(this.elements.wrapper,this.elements.textInput.nextSibling),this.elements.hiddenInput.parentNode.removeChild(this.elements.hiddenInput),this.elements.textInput.parentNode.removeChild(this.elements.textInput),this.elements.hiddenInput.autoComplete=this,this.elements.hiddenInput.type="hidden",this.elements.hiddenInput.className=this.style.hiddenInput,this.elements.hiddenInput.dataset.autocompleteKey=this.key,this.elements.textInput.autoComplete=this,this.elements.textInput.type="hidden",this.elements.textInput.className=this.style.textInput,this.elements.textInput.dataset.autocompleteTextKey=this.key,this.components.presentText.text(this.content),this.elements.wrapper.appendChild(this.elements.hiddenInput),this.elements.wrapper.appendChild(this.elements.textInput),this.elements.wrapper.appendChild(this.components.presentText.element),this.elements.wrapper.appendChild(this.components.icon.element),this.elements.wrapper.appendChild(this.components.panel.element)}},{key:"prepareEvents",value:function(){var e;(e=this.components.presentText.element,k.on).call(e,"click",this.iconOrTextClick.bind(this)),(e=this.components.icon.element,k.on).call(e,"click",this.iconOrTextClick.bind(this)),(e=this.elements.wrapper,k.on).call(e,"keyup",this.keyUp.bind(this)),(e=this.elements.wrapper,k.on).call(e,"keydown",this.keyDown.bind(this)),(e=this.elements.wrapper,k.on).call(e,"focus",this.wrapperFocus.bind(this)),(e=this.elements.wrapper,k.on).call(e,"mousedown",this.wrapperMouseDown.bind(this)),(e=this.elements.wrapper,k.on).call(e,"blur",this.blur.bind(this)),(e=this.components.panel.components.searchInput.elements.input,k.on).call(e,"blur",this.blur.bind(this))}},{key:"keyDown",value:function(e){this.open&&e.keyCode==E.ARROW_UP?(e.preventDefault(),e.stopPropagation(),this.components.panel.components.list.up()):this.open&&e.keyCode==E.ARROW_DOWN?(e.preventDefault(),e.stopPropagation(),this.components.panel.components.list.down()):this.open&&e.keyCode==E.ENTER?(e.preventDefault(),e.stopPropagation(),this.components.panel.components.list.selectCurrent()):e.keyCode==E.TAB&&e.shiftKey&&document.activeElement==this.components.panel.components.searchInput.elements.input&&(this.ignoreFocus=!0)}},{key:"keyUp",value:function(e){e.keyCode===E.ESC?(this.closePanel(),this.ignoreFocus=!0,this.elements.wrapper.focus()):e.target===this.elements.wrapper&&e.keyCode==E.SPACE?(e.preventDefault(),e.stopPropagation(),this.togglePanel()):e.keyCode==E.ARROW_UP||e.keyCode==E.ARROW_DOWN||e.keyCode==E.ENTER?(e.preventDefault(),e.stopPropagation()):I.indexOf(e.keyCode)==-1&&(this.typing||(this.typing=!0,this.clearOnType&&this.select({content:null,value:null}),this.components.panel.clear()),this.debouncedFind())}},{key:"iconOrTextClick",value:function(e){document.activeElement===this.elements.wrapper}},{key:"wrapperFocus",value:function(e){console.log("focus... ignore focus?",this.ignoreFocus),e.isTrigger||this.ignoreFocus||this.openPanel(),this.ignoreFocus=!1}},{key:"blur",value:function(e){if(!this.ignoreBlur){var t;if(this.value!==this.valueOnOpen){var n;this.valueOnOpen=this.value,(n=this.elements.hiddenInput,k.trigger).call(n,"change"),(n=this.elements.textInput,k.trigger).call(n,"change")}(t=this.elements.hiddenInput,k.trigger).call(t,"blur"),(t=this.elements.textInput,k.trigger).call(t,"blur"),this.closePanel()}this.ignoreBlur=!1}},{key:"wrapperMouseDown",value:function(e){console.log("event.target",e.target),console.log("this.open",this.open),console.log("document.activeElement",document.activeElement),this.open||document.activeElement!==this.elements.wrapper?this.open&&document.activeElement===this.elements.wrapper?(console.log(2),this.ignoreBlur=!0,this.components.panel.components.searchInput.elements.input.focus(),this.ignoreFocus=!0):document.activeElement===this.components.panel.components.searchInput.elements.input?(this.open&&this.closePanel(),this.ignoreFocus=!0,this.ignoreBlur=!0):(console.log(4),console.log("else")):(console.log(1),this.openPanel())}},{key:"select",value:function(e){var t=e.content,n=e.value,r=(e.additional,e.others);this.value=n,this.content=t,this.elements.hiddenInput.value=n||"",this.elements.textInput.value=t||"",this.components.presentText.text(t||" "),r&&this.setOtherFields(r)}},{key:"setOtherFields",value:function(){function t(e){return n.apply(this,arguments)}var n=o(regeneratorRuntime.mark(function r(){var t,n,i,o,a=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t=a.length,n=0;case 2:if(!(n<t)){r.next=17;break}if(i=document.querySelector('[name="'+a[n].field+'"]')){r.next=6;break}throw new Error("Field "+a[n].field+" not found to set value!");case 6:if("undefined"==typeof a[n].content){r.next=13;break}if(o=e.autoCompleteByName(a[n].field)){r.next=10;break}throw new Error("Field "+a[n].field+" not found to set value!");case 10:o.select(a[n]),r.next=14;break;case 13:e.projectElementSettings(i,a[n]);case 14:n++,r.next=2;break;case 17:case"end":return r.stop()}},r,this)}));return t}()},{key:"find",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(){var e,t,r,o=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.finding&&(console.log("Let`s abort!"),this.source.abort(),this.findingEnd()),e=this.components.panel.components.searchInput.value(),!(e.length<this.minLength)){n.next=4;break}return n.abrupt("return");case 4:return this.findingStart(),t=s({},this.otherParams,i({},this.queryParam,e)),Object.keys(this.references).forEach(function(e){if(!o.references[e])throw new Error("Reference "+e+" is not valid!");t[e]=o.references[e].value}),r={data:[]},n.prev=8,n.next=11,this.source.find(t);case 11:r=n.sent,this.components.panel.show(r),n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](8),this.components.panel.error(n.t0);case 18:return n.prev=18,this.autoSelectWhenOneResult&&r&&r.data&&1==r.data.length?this.select({content:r.data[0].content,value:r.data[0].value}):this.open||this.autoFind&&!(r&&r.data&&r.data.length>1)||!this.open&&this.openPanel(),this.findingEnd(),n.finish(18);case 22:case"end":return n.stop()}},n,this,[[8,15,18,22]])}));return e}()},{key:"findingStart",value:function(){this.typing=!1,this.finding=!0,this.components.icon.loadingStart()}},{key:"findingEnd",value:function(){this.finding=!1,this.components.icon.loadingStop()}},{key:"openPanel",value:function(){this.open=!0,this.valueOnOpen=this.value,this.elements.wrapper.className=this.style.openWrapper,this.components.panel.element.style.display="inline-block",this.ignoreBlur=!0,this.components.panel.components.searchInput.elements.input.focus(),this.components.panel.components.searchInput.elements.input.setSelectionRange(0,this.components.panel.components.searchInput.elements.input.value.length),this.autoFind&&this.debouncedFind()}},{key:"closePanel",value:function(){this.open=!1,this.elements.wrapper.className=this.style.wrapper,this.components.panel.element.style.display="none"}},{key:"togglePanel",value:function(){this.open?this.closePanel():this.openPanel()}}],[{key:"byId",value:function(e){return document.getElementById(e)}},{key:"byName",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=(this instanceof HTMLElement?this:document).getElementsByName(e);return n.length&&n[t]?n[t]:null}},{key:"autoCompleteByKey",value:function(e){var t=document.querySelector('[data-autocomplete-key="'+e+'"]');if(!t)return null;if(!t.autoComplete)throw new Error("Field is not an autocomplete!",t);return t.autoComplete}},{key:"autoCompleteByName",value:function(t){var n=e.byName(t);if(!n)return null;if(!n.autoComplete)throw new Error("Field is not an autocomplete!",n);return n.autoComplete}},{key:"interpret",value:function(e){return"true"===e||"false"!==e&&(isNaN(e)?e:+e)}},{key:"projectElementSettings",value:function(t,n){var r=n.value,i=n.disabled,o=n.readonly,a=n.required,s=n.visibility,u=n.removed,l=n.label,c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],p=c.defaultDisplayShow,f=void 0===p?"inline-block":p;if("undefined"==typeof l&&"undefined"!=typeof t.dataset.oldLabel&&(l=t.dataset.oldLabel),"undefined"!=typeof l){if(!t.previousSibling)throw new Error("Unknow label node for ",t);"undefined"==typeof t.dataset.oldLabel&&(t.dataset.oldLabel=t.previousSibling.innerText),t.previousSibling.innerText=l}"undefined"==typeof r&&"undefined"!=typeof t.dataset.oldValue&&(r=t.dataset.oldValue),"undefined"!=typeof r&&("undefined"==typeof t.dataset.oldValue&&(t.dataset.oldValue=t.value),t.value=r),"undefined"==typeof i&&"undefined"!=typeof t.dataset.oldDisabled&&(i=e.interpret(t.dataset.oldDisabled)),"undefined"!=typeof i&&("undefined"==typeof t.dataset.oldDisabled&&(t.dataset.oldDisabled=t.disabled),t.disabled=i),"undefined"==typeof o&&"undefined"!=typeof t.dataset.oldReadOnly&&(o=e.interpret(t.dataset.oldReadOnly)),"undefined"!=typeof o&&("undefined"==typeof t.dataset.oldReadOnly&&(t.dataset.oldReadOnly=t.readonly),t.readonly=o),"undefined"==typeof a&&"undefined"!=typeof t.dataset.oldRequired&&(a=e.interpret(t.dataset.oldRequired)),"undefined"!=typeof a&&("undefined"==typeof t.dataset.oldRequired&&(t.dataset.oldRequired=t.required),t.required=a),"undefined"==typeof s&&"undefined"!=typeof t.dataset.oldVisibility&&(s=e.interpret(t.dataset.oldVisibility)),"undefined"!=typeof s&&("undefined"==typeof t.dataset.oldVisibility&&(t.dataset.oldVisibility="none"!==t.style.display),t.style.display=s?f:"none"),1==u&&t.parentNode.removeChild(t)}}]),e}();O.currentSerialKey=0,t["default"]=O},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},o=function(e){if(!e||"[object Object]"!==r.call(e))return!1;var t=n.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!i)return!1;var o;for(o in e);return"undefined"==typeof o||n.call(e,o)};e.exports=function a(){var e,t,n,r,s,u,l=arguments[0],c=1,p=arguments.length,f=!1;for("boolean"==typeof l?(f=l,l=arguments[1]||{},c=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});c<p;++c)if(e=arguments[c],null!=e)for(t in e)n=l[t],r=e[t],l!==r&&(f&&r&&(o(r)||(s=i(r)))?(s?(s=!1,u=n&&i(n)?n:[]):u=n&&o(n)?n:{},l[t]=a(f,u,r)):"undefined"!=typeof r&&(l[t]=r));return l}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=(r(a),n(7)),u=(r(s),n(9)),l=(n(10),function(){function e(t){var n=t.style,r=n.presentText,o=n.presentInnerText,a=n.presentCropText;i(this,e),this.elements={},this.elements.inner=(0,u.div)({className:o}),this.elements.crop=(0,u.div)({className:a},this.elements.inner),this.element=(0,u.div)({className:r},this.elements.crop)}return o(e,[{key:"text",value:function(e){this.elements.inner.innerText=e}}]),e}());t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),u=(r(s),function(){function e(){o(this,e)}return a(e,[{key:"find",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function n(e){e.value;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}},n,this)}));return e}()}]),e}());t["default"]=u},function(e,t){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"find",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function r(e){e.value;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Source class is abstract!");case 1:case"end":return e.stop()}},r,this)}));return e}()},{key:"abort",value:function(){}}]),e}();t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=document.createElement(e);(0,d["default"])(n,t);for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return i.forEach(function(e){n.appendChild(e)}),n}function o(e){return i("input",e)}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i.apply(void 0,["div",e].concat(n))}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i.apply(void 0,["ul",e].concat(n))}function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i.apply(void 0,["li",e].concat(n))}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i.apply(void 0,["strong",e].concat(n))}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i.apply(void 0,["a",e].concat(n))}function p(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i.apply(void 0,["i",e].concat(n))}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i.apply(void 0,["strong",e].concat(n))}function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i.apply(void 0,["span",e].concat(n))}Object.defineProperty(t,"__esModule",{value:!0}),t.elem=i,t.input=o,t.div=a,t.ul=s,t.li=u,t.strong=l,t.a=c,t.i=p,t.strong=l,t.span=f;var h=n(5),d=r(h)},function(e,t){"use strict";function n(e){if(window.CustomEvent){var t=new CustomEvent(e);t.isTrigger=!0,this.dispatchEvent(t)}else if(document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!1),t.isTrigger=!0,this.dispatchEvent(t)}else this.fireEvent("on"+e)}function r(e,t){this.addEventListener(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.trigger=n,t.on=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=(r(a),n(7)),u=(r(s),n(9)),l=(n(10),function(){function e(t){var n=t.style;i(this,e),this.style=n,this.element=(0,u.i)({className:n.rightIcon})}return o(e,[{key:"loadingStart",value:function(){this.element.className=this.style.loadingRightIcon}},{key:"loadingStop",value:function(){this.element.className=this.style.rightIcon}}]),e}());t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=(r(a),n(7)),u=(r(s),n(13)),l=r(u),c=n(14),p=r(c),f=n(15),h=r(f),d=n(9),v=function(){function e(t,n,r){var o=t.style,a=n.onSelect;i(this,e),this.components={searchInput:new l["default"]({style:o},(void 0),r),errorView:new p["default"]({style:o}),list:new h["default"]({style:o},{onSelect:a},r)},this.element=(0,d.div)({className:o.panel},this.components.searchInput.elements.wrapper,this.components.errorView.elements.wrapper,this.components.list.elements.wrapper)}return o(e,[{key:"show",value:function(e){this.components.list.show(e.data)}},{key:"error",value:function(e){var t=e.message;this.components.errorView.show(t)}},{key:"clear",value:function(){this.components.errorView.hide(),this.components.list.hide()}}]),e}();t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=(r(a),n(7)),u=(r(s),n(9)),l=function(){function e(t,n,r){var o=t.style;i(this,e),this.elements={},this.elements.wrapper=(0,u.div)({className:o.searchInputWrapper},this.elements.input=(0,u.input)({className:o.searchInput,placeholder:r.messages.searchPlaceholder}))}return o(e,[{key:"value",value:function(e){return"undefined"!=typeof e?(this.elements.input.value=e,this):this.elements.input.value}}]),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=(r(a),n(7)),u=(r(s),n(9)),l=function(){function e(t){var n=t.style;i(this,e),this.elements={},this.elements.wrapper=(0,u.div)({className:n.errorViewWrapper},this.elements.error=(0,u.div)({className:n.errorView})),this.hide()}return o(e,[{key:"show",value:function(e){this.elements.error.innerText=e,this.elements.wrapper.style.display="block"}},{key:"hide",value:function(){this.elements.wrapper.style.display="none"}}]),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),u=(r(s),n(7)),l=(r(u),n(9)),c=function(){function e(t,n,r){var i=t.style,a=n.onSelect;o(this,e),this.elements={},this.onSelect=a,this.autocomplete=r,this.style=i,this.items=[],this.selectedIndex=0,this.searchInput=null,this.elements.wrapper=(0,l.div)({className:i.listWrapper},this.elements.ul=(0,l.ul)()),this.hide()}return a(e,[{key:"show",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this.items=t,this.elements.ul.innerHTML="",this.searchInput=this.autocomplete.components.panel.components.searchInput;var n=t.length,r=0;if(this.autocomplete.emptyItem){var o=(0,l.div)({className:this.style.item+" "+this.style.emptyItem,innerText:this.autocomplete.messages.emptyItemName});this.prepareItemEvents(o,{content:null,value:null},r);var a=(0,l.li)({},o);this.elements.ul.appendChild(a),r++}for(var s=0;s<n;s++){var u=(0,l.span)({innerText:t[s].content}),c=null;t[s].additional&&t[s].additional.length&&(c=l.div.call.apply(l.div,[null,{}].concat(i(t[s].additional.map(function(t){
var n=t.label,r=t.content;return(0,l.div)({className:e.style.additional},(0,l.strong)({innerText:n+": "}),(0,l.span)({innerText:r}))})))));var p=(0,l.div)({className:this.style.item},u);c&&p.appendChild(c),this.prepareItemEvents(p,t[s],r);var f=(0,l.li)({},p);this.elements.ul.appendChild(f),r++}if(this.autocomplete.customText&&this.searchInput.value().trim().length){var h=this.searchInput.value().trim(),d=(0,l.div)({className:this.style.item+" "+this.style.customTextItem,innerText:h});this.prepareItemEvents(d,{content:h,value:null},r);var v=(0,l.li)({},d);this.elements.ul.appendChild(v),r++}this.elements.wrapper.style.display="block",this.updateSelection(0)}},{key:"prepareItemEvents",value:function(e,t,n){var r=this;e.addEventListener("mouseenter",function(e){r.updateSelection(n)}),e.addEventListener("mousedown",function(e){r.onSelect(t),r.autocomplete.closePanel()})}},{key:"up",value:function(){this.elements.ul.children.length&&this.updateSelection(this.selectedIndex-1)}},{key:"down",value:function(){this.elements.ul.children.length&&this.updateSelection(this.selectedIndex+1)}},{key:"selectCurrent",value:function(){this.autocomplete.emptyItem&&0==this.selectedIndex?this.onSelect({content:null,value:null}):this.autocomplete.customText&&this.selectedIndex==this.elements.ul.children.length-1&&this.searchInput.value().trim().length?this.onSelect({value:null,content:this.searchInput.value().trim()}):this.autocomplete.emptyItem?this.onSelect(this.items[this.selectedIndex-1]):this.onSelect(this.items[this.selectedIndex]),this.autocomplete.closePanel(),document.activeElement!=this.autocomplete.elements.wrapper&&(this.autocomplete.ignoreFocus=!0,console.log(this.autocomplete.elements.wrapper),this.autocomplete.elements.wrapper.focus())}},{key:"updateSelection",value:function(e){var t=this.selectedIndex,n=this.elements.ul.children;this.selectedIndex=Math.max(0,Math.min(n.length-1,e));var r=n[t];r&&r.children[0].classList.remove("active"),n[this.selectedIndex].children[0].classList.add("active")}},{key:"hide",value:function(){this.elements.wrapper.style.display="none"}}]),e}();t["default"]=c},function(e,t){"use strict";function n(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ENTER=13,t.SPACE=32,t.ESC=27,t.ARROW_UP=38,t.ARROW_DOWN=40,t.ARROW_RIGHT=39,t.ARROW_LEFT=37,t.TAB=9,t.SHIFT=16},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),u=(r(s),function(){function e(t){o(this,e),this.url=t,this.request=null}return a(e,[{key:"prepareRequest",value:function(e){this.request=new XMLHttpRequest;var t=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");this.request.open("GET",this.url+"?"+t,!0)}},{key:"abort",value:function(){this.request&&this.request.abort&&this.request.abort()}},{key:"send",value:function(){var e=this;return new Promise(function(t,n){e.request.onreadystatechange=function(){if(console.log("readyState change",e.request.readyState,e.request.status,e.request),4==e.request.readyState&&200==e.request.status){var r=JSON.parse(e.request.responseText);e.request=null,t(r)}else 4==e.request.readyState&&200!=e.request.status&&n(new Error(e.request.responseText))},e.request.send()})}},{key:"find",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function n(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.prepareRequest(e),t.next=3,this.send();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},n,this)}));return e}()}]),e}());t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),u=(r(s),function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];o(this,e),this.data=t}return a(e,[{key:"find",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function n(e){e.value;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:this.data});case 1:case"end":return e.stop()}},n,this)}));return e}()}]),e}());t["default"]=u}]);